exports.id=163,exports.ids=[163],exports.modules={77188:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var a=r(20997),s=r(16689),o=r(1635),l=r.n(o),n=r(85753),i=r(10298),d=r(90036),c=r(19),u=r.n(c);let m=l()(),h=({dates:e,onChangeStartDate:t,onChangeEndDate:r,notAvailable:o,isNewSlot:c=!1,isOnlyPreiview:h=!1})=>{let[x,g]=(0,s.useState)(c?l()(e.startDate).add(60,"minutes"):l()(e.startDate)),[f,y]=(0,s.useState)(c?l()(e.endDate).add(3,"hours"):l()(e.endDate)),[p,b]=(0,s.useState)({startDate:!1,endDate:!1,past:!0}),[w,k]=(0,s.useState)(15),j=(0,s.useCallback)((e,t,r)=>"minutes"===t&&((r?x.isBefore(m):f.isBefore(m))||o),[x,f,o]),v=(0,s.useCallback)(e=>0===e.day()||6===e.day(),[]);(0,s.useEffect)(()=>{b({startDate:x.isBefore(m),endDate:m.isAfter(f),past:m.isAfter(x)&&m.isAfter(f)}),k(x.isSame(f,"day")&&x.isSame(f,"hour")?45:15)},[x,f]);let N=(0,s.useMemo)(()=>({"& .MuiInputBase-root":{color:"#fff",width:"100%"},"& .MuiFormLabel-root":{color:"#fff"},"& .MuiSvgIcon-root":{fill:"#fff"}}),[]);return a.jsx(u(),{className:"flex text-white gap-10 mt-5",children:(0,a.jsxs)(n.LocalizationProvider,{dateAdapter:i.AdapterDayjs,children:[a.jsx(d.DateTimePicker,{disabled:h,className:`bg-gray-50 border text-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500 ${p.startDate?"pointer-events-none opacity-50":""}`,label:"Start date and time",value:x,minDate:x,maxDate:f.add(1,"days"),shouldDisableDate:v,shouldDisableTime:(e,t)=>j(e,t,!0),disablePast:p.startDate,timeSteps:{minutes:15},ampm:!1,onChange:e=>{e&&(g(e),e.isAfter(f)&&y(e),t(e))},sx:N}),a.jsx(d.DateTimePicker,{disabled:h,className:`bg-gray-50 border text-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500 ${p.endDate?"pointer-events-none opacity-50":""}`,label:"End date and time",value:f,minDate:x,shouldDisableDate:v,shouldDisableTime:(e,t)=>j(e,t,!1),disablePast:!p.past,closeOnSelect:!1,timeSteps:{minutes:w},ampm:!1,onChange:e=>{e&&e.isAfter(x)&&(y(e),r(e))},sx:N})]})})}},90161:(e,t,r)=>{"use strict";r.d(t,{zx:()=>l,ZT:()=>y,Ph:()=>m,nv:()=>d});var a=r(20997);r(16689);var s=r(53819),o=r.n(s);let l=e=>a.jsx(o(),{...e,children:e.children});var n=r(36042),i=r.n(n);let d=e=>a.jsx(i(),{...e});r(58330),r(78860),r(88185),r(52120);var c=r(42651),u=r.n(c);let m=e=>a.jsx(u(),{...e});var h=r(19),x=r.n(h),g=r(27163),f=r.n(g);let y=({icon:e,label:t="",additionalCss:r="",width:s="30px",height:o="30px",iconFillColor:l="",onClick:n=()=>{}})=>a.jsx(a.Fragment,{children:(0,a.jsxs)(x(),{onClick:e=>n(e),className:`flex flex-col items-center ${r}`,children:[a.jsx(x(),{className:"rounded-full flex items-center justify-center",children:a.jsx(x(),{sx:{"& svg":{fill:`${l}`,width:`${s}`,height:`${o}`},"& svg:hover":{fill:`${"red"==l?"gray":"red"}`}},className:"flex items-center justify-center",children:e&&e})}),""!=t&&a.jsx(f(),{variant:"body2",children:t})]})})},59565:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>f});var s=r(20997),o=r(25675),l=r.n(o),n=r(38325),i=r(87927),d=r(90161),c=r(27163),u=r.n(c),m=r(39874),h=r(19),x=r.n(h),g=e([i]);i=(g.then?(await g)():g)[0];let f=({data:e,onHandleClick:t,onHandleDeleteClick:r,isDeleted:a=!1})=>{let o=async t=>{t.preventDefault(),t.stopPropagation(),r(e)};return(0,s.jsxs)(x(),{className:"min-h-full",onClick:()=>{t(e)},children:[(0,s.jsxs)(x(),{className:"relative",children:[s.jsx(x(),{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:s.jsx(x(),{className:"bg-blue-700 h-2.5",style:{width:(0,i.SB)(e).toFixed(1)+"%"}})}),a&&s.jsx(d.ZT,{onClick:e=>o(e),additionalCss:"absolute z-[20] left-3 top-[60px]",icon:s.jsx(m.Z,{})}),(0,s.jsxs)(x(),{children:[e?.slot?.free&&s.jsx(l(),{className:"w-full h-[300px] object-cover",width:"300",height:"300",src:"/assets/224_green_169949.webp",alt:"Sunset in the mountains"}),!e.slot.free&&s.jsx(l(),{className:"w-full h-[300px] object-cover",width:"300",height:"300",src:"/assets/221_ruby-red_cb0914.webp",alt:"Sunset in the mountains"})]}),s.jsx(x(),{className:"flex",children:s.jsx(u(),{className:"text-white text-lg ml-3 mr-2 mt-3 font-bold",variant:"body2",children:" Slot Information: "})}),s.jsx(x(),{className:"border-gray-500 w-full border-2 mt-3 mb-2"}),s.jsx(x(),{className:`text-xs absolute top-0 right-0 ${e.progress==n.SD.COMPLETED?n.YZ.RED:e.progress==n.SD.IN_PROGRESS?n.YZ.ORANGE:n.YZ.GREEN} px-10 py-2 text-white mt-3 mr-3 hover:bg-white hover:text-indigo-600 transition duration-500 ease-in-out`,children:e.progress}),s.jsx(x(),{className:"text-xs absolute top-0 left-0 bg-gray-500 px-10 py-2 text-white mt-3 ml-3 hover:bg-white hover:text-indigo-600 transition duration-500 ease-in-out",children:e.slot.type===n.vV.DESK?"Desk":"Car"})]}),(0,s.jsxs)(x(),{className:"px-4 py-2 mb-auto",children:[(0,s.jsxs)(x(),{className:"flex",children:[s.jsx(u(),{className:"text-white text-lg mr-2 max-w-28 w-full",variant:"body2",children:" Location: "})," ",(0,s.jsxs)(u(),{className:"text-white text-lg font-medium",variant:"h2",children:[" ",e.slot.location," "]})]}),(0,s.jsxs)(x(),{className:"flex",children:[s.jsx(u(),{className:"text-white text-lg mr-2 max-w-28 w-full",variant:"body2",children:" Description: "})," ",(0,s.jsxs)(u(),{className:"text-white text-lg font-medium",variant:"h5",children:[" ",e.slot.description," "]})]})]}),s.jsx(x(),{className:"flex",children:s.jsx(u(),{className:"text-white text-lg ml-3 mr-2 mt-3 font-bold",variant:"body2",children:" Date Information: "})}),s.jsx(x(),{className:"border-gray-500 w-full border-2 mt-2 mb-2"}),(0,s.jsxs)(x(),{className:"px-4 py-2 mb-auto",children:[(0,s.jsxs)(x(),{className:"flex",children:[s.jsx(u(),{className:"text-white text-lg mr-2 max-w-28 w-full",variant:"body2",children:" Start Date: "})," ",(0,s.jsxs)(u(),{className:"text-white text-lg font-bold",variant:"h5",children:[" ",(0,i.u6)(e.startDate,"ca")," "]})]}),(0,s.jsxs)(x(),{className:"flex",children:[s.jsx(u(),{className:"text-white text-lg mr-2 max-w-28 w-full",variant:"body2",children:" End Date: "})," ",(0,s.jsxs)(u(),{className:"text-white text-lg font-bold",variant:"h5",children:[" ",(0,i.u6)(e.endDate,"ca")," "]})]})]}),s.jsx(x(),{className:"px-6 py-1 flex flex-row items-center justify-between bg-gray-100",children:s.jsx(x(),{className:"flex",children:(0,s.jsxs)(u(),{className:"text-black text-lg font-bold",variant:"h5",children:[" ",e.description," "]})})})]})};a()}catch(e){a(e)}})},27121:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>b});var s=r(20997),o=r(25675),l=r.n(o),n=r(38325),i=r(90161),d=r(3093),c=r(75922),u=r(58001),m=r(27163),h=r.n(m),x=r(53950),g=r(39874),f=r(19),y=r.n(f),p=e([d,c]);[d,c]=p.then?(await p)():p;let b=({slot:e,isDeleted:t=!1,onHandleClick:r,handleFavoriteSlots:a})=>{let{setAlert:o}=(0,c.VY)(),{favoriteSlots:m,setFavoriteSlots:f}=(0,d.MJ)(),{user:p}=(0,d.LM)(),b=e=>m?.some(t=>t.id===e.id),w=async(e,t)=>{if(e.preventDefault(),e.stopPropagation(),p)try{let e=await fetch("/api/user/setFavoriteSlot",{body:JSON.stringify({user:p,slot:t,toggle:b(t)}),headers:u.A,method:"POST"});await e.json().then(e=>{f(e.favoriteSlots),a&&a(e?.favoriteSlots||[])});let r=b(t);o("",`${r?"Favorite slot is removed":"New slot is added to favorites"}`,"success")}catch(e){console.error(e),o("",`${e}`,"error")}},k=async(e,t)=>{e.preventDefault(),e.stopPropagation()};return(0,s.jsxs)(y(),{onClick:()=>r(e),className:"rounded md:mx-0 overflow-hidden shadow-lg flex flex-col min-w-full sm:min-w-[380px] md:min-w-[400px] min-h-full",children:[(0,s.jsxs)(y(),{className:"relative",children:[p&&s.jsx(i.ZT,{onClick:t=>w(t,e),iconFillColor:b(e)?"red":"",additionalCss:"absolute z-[20] right-3 top-[8px]",icon:s.jsx(x.Z,{})}),t&&s.jsx(i.ZT,{onClick:t=>k(t,e),additionalCss:"absolute z-[20] left-3 top-[60px]",icon:s.jsx(g.Z,{})}),(0,s.jsxs)(y(),{children:[s.jsx(l(),{className:"w-full h-[300px] object-cover",width:"400",height:"400",src:e.type===n.vV.CAR?"/assets/224_green_169949.webp":"/assets/desk.jpeg",alt:e.type===n.vV.CAR?"Car":"Desk"}),s.jsx(y(),{className:"hover:bg-transparent transition duration-300 absolute bottom-0 top-0 right-0 left-0 bg-gray-900 opacity-25"})]}),s.jsx(y(),{className:"text-xs absolute top-0 left-0 bg-gray-500 px-2 md:px-10 py-2 md:py-3 text-white mt-3 ml-3 hover:bg-white hover:text-indigo-600 transition duration-500 ease-in-out",children:e.type===n.vV.CAR?"Car":"Desk"})]}),(0,s.jsxs)(y(),{className:"px-3 md:px-6 py-2 md:py-4 mb-auto",children:[(0,s.jsxs)(y(),{className:"flex",children:[s.jsx(h(),{className:"text-white text-lg mr-2",variant:"body2",children:"Location:"}),s.jsx(h(),{className:"text-white text-lg font-bold max-w-64",variant:"h2",children:e.location})]}),(0,s.jsxs)(y(),{className:"flex",children:[s.jsx(h(),{className:"text-white text-lg mr-2",variant:"body2",children:"Description:"}),s.jsx(h(),{className:"text-white text-lg font-bold max-w-64",variant:"h5",children:e.description})]})]}),s.jsx(y(),{className:"px-6 py-1 flex flex-row items-center justify-between bg-gray-100"})]})};a()}catch(e){a(e)}})},8036:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>w});var s=r(20997),o=r(19),l=r.n(o),n=r(65848),i=r.n(n),d=r(27163),c=r.n(d),u=r(94192),m=r.n(u),h=r(834),x=r.n(h),g=r(41664),f=r.n(g),y=r(11163),p=r(3093),b=e([p]);p=(b.then?(await b)():b)[0];let w=()=>{let e=(0,y.useRouter)(),{user:t}=(0,p.LM)();return s.jsx("footer",{className:"sticky top-[100vh] mx-5",children:(0,s.jsxs)(l(),{className:"bg-gray-800 mt-8 w-full mx-auto p-4 rounded-lg flex items-center md:justify-between",children:[s.jsx(l(),{className:"flex",children:(0,s.jsxs)(f(),{className:"flex justify-center items-center",href:"/home",children:[s.jsx(i(),{sx:{display:{xs:"flex"},mr:1,fill:"whitesmoke"}}),s.jsx(c(),{variant:"h6",noWrap:!0,sx:{mr:2,display:{xs:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"whitesmoke",textDecoration:"none"},children:"LOGO"})]})}),s.jsx(c(),{component:"span",className:"text-sm text-gray-500 sm:text-center dark:text-gray-400",children:"\xa9 2024 All Rights Reserved."}),s.jsx(m(),{className:"flex flex-wrap items-center text-lg md:text-sm font-medium text-gray-500 dark:text-gray-400 sm:mt-0",children:t&&s.jsx(x(),{className:"hover:underline me-4 md:me-6",children:s.jsx(f(),{href:"/profile"==e.asPath?"/home":"/profile",children:s.jsx(c(),{textAlign:"center",children:"/profile"==e.asPath?"Home":"Profile"})})})})]})})};a()}catch(e){a(e)}})},99574:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>D});var s=r(20997),o=r(16689),l=r(11163),n=r(60401),i=r(72090),d=r.n(i),c=r(68349),u=r.n(c),m=r(74460),h=r.n(m),x=r(97307),g=r.n(x),f=r(26596),y=r.n(f),p=r(93302),b=r.n(p),w=r(26601),k=r(3093),j=r(75922),v=r(58001),N=r(15678),S=e([n,k,j,N]);[n,k,j,N]=S.then?(await S)():S;let D=({currentUser:e,setCurrentUser:t,currentPhotoUrl:r})=>{let a=(0,l.useRouter)(),i=(0,k.LM)(e=>e.user),{logOut:c}=(0,N.a)(),{setAlert:m}=(0,j.VY)(),[x,f]=(0,o.useState)(i?.password||null),[p,S]=(0,o.useState)(i?.email||null),[D,C]=(0,o.useState)(i?.name||null),[O,E]=(0,o.useState)(r||null),A=async()=>(await fetch("/api/user/updateUserProfile",{body:JSON.stringify({user:{...i,password:x,email:p,name:D,photoUrl:O||i?.photoUrl}}),headers:v.A,method:"POST"})).ok,T=async e=>{e.preventDefault();let r=(0,n.getAuth)().currentUser;if(r)try{(O||D)&&(await (0,n.updateProfile)(r,{displayName:D,photoURL:O}),await A().then(e=>{e?m("","Profile updated successfully!","success"):m("","Profile update unsuccessful!","error")})),i&&D&&(i.name=D,k.LM.setState({user:i})),i?.provider!==w.x.GOOLGE_LOGIN&&(await P(r),await Z(r),x&&p&&(x!==i?.password||p!==i?.email)&&setTimeout(()=>{c(),a.push("/sign-in")},1e3)),t(r)}catch(t){let{message:e}=t;m("",`Error: ${e}`,"error")}else m("","No user is signed in.","info")},Z=async e=>{if(e&&x&&x!==i?.password)try{if(e.email&&i?.password){let t=n.EmailAuthProvider.credential(e.email,i.password);await (0,n.reauthenticateWithCredential)(e,t),await (0,n.updatePassword)(e,x),await A().then(e=>{e?m("","Password updated successfully!","success"):m("","Password update unsuccessfully!","error")})}}catch(t){let{message:e}=t;m("",`Error: ${e}`,"error")}},P=async e=>{if(e&&p&&p!==e.email)try{if(e.email&&i?.password){let t=n.EmailAuthProvider.credential(e.email,i.password);await (0,n.reauthenticateWithCredential)(e,t),await (0,n.updateEmail)(e,p),await A().then(e=>{e?m("","Email updated successfully!","success"):m("","Email update unsuccessfully!","error")})}}catch(t){let{message:e}=t;m("",`Error: ${e}`,"error")}};return(0,o.useEffect)(()=>{e&&i&&(C(i?.name),S(e.email),f(i?.password),r&&E(r),t(e))},[e,r]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d(),{className:"gap-4 pb-5 text-white",children:[(0,s.jsxs)(u(),{className:"text-white mb-6",children:[s.jsx(h(),{htmlFor:"name",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Name"}),s.jsx(g(),{className:"bg-gray-50 bordertext-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-40 dark:focus:ring-blue-500 dark:focus:border-blue-500",size:"small",required:!0,type:"name",color:"primary",placeholder:"John Doe",variant:"filled",fullWidth:!0,sx:{"& .MuiInputBase-root":{color:"#fff"}},value:D,onChange:e=>C(e.target.value)})]}),(0,s.jsxs)(u(),{className:"text-white mb-6",children:[s.jsx(h(),{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Email"}),s.jsx(g(),{className:"bg-gray-50 bordertext-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-40 dark:focus:ring-blue-500 dark:focus:border-blue-500",size:"small",required:!0,type:"email",color:"primary",placeholder:"name@company.com",disabled:i?.provider==w.x.GOOLGE_LOGIN,variant:"filled",fullWidth:!0,sx:{"& .MuiInputBase-root":{color:"#fff"}},value:p,onChange:e=>S(e.target.value)}),s.jsx(y(),{component:"p",variant:"body1",className:"py-2 px-1 text-sm",children:i?.provider==w.x.GOOLGE_LOGIN?"*Note: Google profile can't change their email":""})]}),(0,s.jsxs)(u(),{children:[s.jsx(h(),{required:!0,htmlFor:"password",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Password"}),s.jsx(g(),{className:"bg-gray-50 bordertext-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-40 dark:focus:ring-blue-500 dark:focus:border-blue-500",size:"small",required:!0,type:"password",color:"primary",placeholder:"••••••••",disabled:i?.provider==w.x.GOOLGE_LOGIN,variant:"filled",fullWidth:!0,sx:{"& .MuiInputBase-root":{color:"#fff"}},value:x,onChange:e=>f(e.target.value)}),s.jsx(y(),{component:"p",variant:"body1",className:"py-2 px-1 text-sm",children:i?.provider==w.x.GOOLGE_LOGIN?"*Note: Google profile can't change their password":""})]})]}),i?.provider!==w.x.GOOLGE_LOGIN&&s.jsx(y(),{component:"p",variant:"body2",className:"",children:"*Note: Changing email or password will log you out automatically"}),s.jsx(u(),{className:"flex justify-end items-end min-h-20",children:s.jsx(b(),{onClick:T,variant:"contained",type:"button",className:"w-60 text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:"Update Profile"})})]})};a()}catch(e){a(e)}})},45495:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>S});var s=r(20997),o=r(16689),l=r(41664),n=r.n(l),i=r(11163),d=r(1492),c=r(90161),u=r(15678),m=r(58001),h=r(75922),x=r(43626),g=r.n(x),f=r(26596),y=r.n(f),p=r(34492),b=r.n(p),w=r(19),k=r.n(w),j=r(76096),v=r.n(j),N=e([d,u,h]);[d,u,h]=N.then?(await N)():N;let S=()=>{let{setAlert:e}=(0,h.VY)(),t=(0,i.useRouter)(),{signInWithGoogle:r,logIn:a,triggerResetEmail:l}=(0,u.a)(),[d,x]=(0,o.useState)({email:"",password:""}),f=async()=>await r().then(()=>t.push("/home")).catch(e=>alert(e.message)),p=async r=>{await a(d.email,d.password).then(async r=>{let a=await fetch("/api/user/updateUserByEmail",{body:JSON.stringify({data:{...d}}),headers:m.A,method:"POST"});a.ok?((await a.json()).isDeleted?e("","You are not allowed to login","warning"):e("",`Welcome ${d.email}`,"info"),t.push("/home")):(t.push("/home"),e("","There is some problem with your credentials.","error"))}).catch(e=>alert(e.message))},w=async()=>{d.email&&await l(d.email).then(()=>{t.push("/home")}).catch(e=>alert(e.message))};return(0,s.jsxs)("form",{className:"space-y-4 md:space-y-6",action:"#",children:[s.jsx(k(),{className:"flex items-center justify-between",children:(0,s.jsxs)(c.zx,{onClick:f,variant:"contained",type:"button",className:"w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:[s.jsx(b(),{className:"mr-2"}),"Sign in with Google"]})}),(0,s.jsxs)(k(),{className:"flex items-center justify-between",children:[s.jsx(k(),{className:"border-gray-500 w-2/4 border-2"}),s.jsx(y(),{className:"text-zinc-400 px-4",children:"OR"}),s.jsx(k(),{className:"border-gray-500 w-2/4 border-2"})]}),(0,s.jsxs)(k(),{className:"text-white",children:[s.jsx(v(),{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Email"}),s.jsx(c.nv,{className:"bg-gray-50 bordertext-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-40 dark:focus:ring-blue-500 dark:focus:border-blue-500",size:"small",required:!0,type:"email",color:"primary",placeholder:"name@company.com",variant:"filled",fullWidth:!0,sx:{"& .MuiInputBase-root":{color:"#fff"}},onChange:e=>{x({...d,email:e.target.value})}})]}),(0,s.jsxs)(k(),{children:[s.jsx(v(),{htmlFor:"password",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Password"}),s.jsx(c.nv,{className:"bg-gray-50 bordertext-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-40 dark:focus:ring-blue-500 dark:focus:border-blue-500",size:"small",required:!0,type:"password",color:"primary",placeholder:"••••••••",variant:"filled",fullWidth:!0,sx:{"& .MuiInputBase-root":{color:"#fff"}},onChange:e=>{x({...d,password:e.target.value})}})]}),s.jsx(k(),{className:"flex items-center justify-end",children:s.jsx(n(),{onClick:w,className:"text-sm font-medium text-white hover:underline dark:text-primary-500",href:"/#",children:"Forgot password?"})}),(0,s.jsxs)(c.zx,{onClick:p,variant:"contained",type:"button",className:"w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:[s.jsx(g(),{className:"mr-2"}),"Sign in"]}),(0,s.jsxs)(y(),{className:"text-sm font-light text-gray-500 dark:text-gray-400",children:["Don’t have an account yet?"," ",s.jsx(n(),{className:"font-medium text-primary-600 hover:underline dark:text-primary-500",href:"/sign-up",children:"Sign up"})]})]})};a()}catch(e){a(e)}})},94005:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>N});var s=r(20997),o=r(16689),l=r(11163),n=r(1492),i=r(90161),d=r(61125),c=r(15678),u=r(43626),m=r.n(u),h=r(34492),x=r.n(h),g=r(72090),f=r.n(g),y=r(68349),p=r.n(y),b=r(26596),w=r.n(b),k=r(74460),j=r.n(k),v=e([n,c]);[n,c]=v.then?(await v)():v;let N=()=>{let[e,t]=(0,o.useState)({name:"",email:"",password:"",loginType:d.X.NORMAL,role:d.g.NORMAL,isDeleted:!1,dateCreated:new Date(Date.now()),favoriteSlots:[]}),r=(0,l.useRouter)(),{signUpWithGoogle:a,signUp:n}=(0,c.a)(),u=async t=>{await n(e.email,e.password,e.name).then(()=>r.push("/home")).catch(e=>alert(e))},h=async e=>{await a().then(()=>r.push("/home")).catch(e=>alert(e.message))},g=(r,a)=>{t({...e,[a]:r.target.value})};return s.jsx("form",{className:"space-y-4 md:space-y-6",action:"#",children:(0,s.jsxs)(f(),{className:"space-y-4 md:space-y-6",children:[s.jsx(f(),{className:"flex items-center justify-between gap-3",children:(0,s.jsxs)(i.zx,{onClick:h,variant:"contained",type:"button",className:"w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:[s.jsx(x(),{className:"mr-2"}),"Sign up with Google"]})}),(0,s.jsxs)(p(),{className:"flex items-center justify-between",children:[s.jsx(p(),{className:"border-gray-500 w-2/4 border-2"}),s.jsx(w(),{className:"text-zinc-400 px-4",children:"OR"}),s.jsx(p(),{className:"border-gray-500 w-2/4 border-2"})]}),(0,s.jsxs)(p(),{className:"text-white",children:[s.jsx(j(),{required:!0,htmlFor:"name",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Name"}),s.jsx(i.nv,{className:"bg-gray-50 bordertext-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-40 dark:focus:ring-blue-500 dark:focus:border-blue-500",size:"small",required:!0,type:"text",color:"primary",placeholder:"John Doe",variant:"filled",fullWidth:!0,sx:{"& .MuiInputBase-root":{color:"#fff"}},onChange:e=>g(e,"name")})]}),(0,s.jsxs)(p(),{className:"text-white",children:[s.jsx(j(),{required:!0,htmlFor:"name",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Email"}),s.jsx(i.nv,{className:"bg-gray-50 bordertext-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-40 dark:focus:ring-blue-500 dark:focus:border-blue-500",size:"small",required:!0,type:"email",color:"primary",placeholder:"name@company.com",variant:"filled",fullWidth:!0,sx:{"& .MuiInputBase-root":{color:"#fff"}},onChange:e=>g(e,"email")})]}),(0,s.jsxs)(p(),{children:[s.jsx(j(),{required:!0,htmlFor:"password",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Password"}),s.jsx(i.nv,{className:"bg-gray-50 bordertext-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-40 dark:focus:ring-blue-500 dark:focus:border-blue-500",size:"small",required:!0,type:"password",color:"primary",placeholder:"••••••••",variant:"filled",fullWidth:!0,sx:{"& .MuiInputBase-root":{color:"#fff"}},onChange:e=>g(e,"password")})]}),s.jsx(p(),{className:"flex items-center justify-between gap-3",children:(0,s.jsxs)(i.zx,{onClick:u,variant:"contained",type:"button",className:"w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:[s.jsx(m(),{className:"mr-2"}),"Sign up"]})})]})})};a()}catch(e){a(e)}})},26164:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>P});var s=r(20997),o=r(16689),l=r(90161),n=r(39588),i=r(87927),d=r(77188),c=r(3093),u=r(75922),m=r(58001),h=r(27163),x=r.n(h),g=r(68349),f=r.n(g),y=r(74460),p=r.n(y),b=r(37786),w=r.n(b),k=r(39425),j=r.n(k),v=r(1192),N=r.n(v),S=r(52526),D=r.n(S),C=r(1635),O=r.n(C),E=r(1492),A=r(65937),T=e([i,c,u,E,A]);[i,c,u,E,A]=T.then?(await T)():T;let Z=O()(),P=({data:e,onClose:t,onConfirm:r})=>{let a=(0,c.LM)(e=>e.user),{setAlert:h}=(0,u.VY)(),[g,y]=(0,o.useState)([]),[b,k]=(0,o.useState)([]),[v,S]=(0,o.useState)([]),[C,T]=(0,o.useState)(e),[P,L]=(0,o.useState)(Z),[I,M]=(0,o.useState)(Z),[G,_]=(0,o.useState)(""),[F,U]=(0,o.useState)(!1),[B,R]=(0,o.useState)(!0),z=(0,o.useCallback)(async()=>{let t=await fetch("/api/slots/getSlots",{headers:m.A,method:"Get"});if(t.ok){let r=await t.json();if(S(r),e?.id){let t=r.find(t=>t.id==e.id);T(t)}}else{let e=await t.json();console.log(e.message)}},[e?.id]),$=(0,o.useCallback)(async()=>{if(!C?.id)return;let e=await fetch("/api/bookedSlots/getAllSlots",{headers:m.A,method:"GET"});if(e.ok){let t=await e.json(),r=((t?.filter(e=>(e?.slot).id==C.id)||[]).filter(e=>O()(e?.endDate)>Z)||[]).map(e=>({...e,startDate:new Date(e.startDate),endDate:new Date(e.endDate)}));y(r)}else{let t=await e.json();console.log(t.message)}},[C?.id]),J=e=>{T(e.target.value)},W=async()=>{if(C&&P&&I&&a){try{await fetch("/api/bookedSlots/createSlot",{body:JSON.stringify({user:a,slot:C,startDate:P,endDate:I,description:G}),headers:m.A,method:"Post"}).then(()=>{h("","New booked slot is added","success")})}catch(e){console.log(e),h("",`${e}`,"error")}t()}},V=(e,t,r)=>{if(e&&t){let a=(0,i.o$)(e.toDate(),t.toDate(),r);R(a),U(a)}else R(!0),U(!1)};return(0,o.useEffect)(()=>{if(C?.id){let e=(0,E.doc)(A.db,"slots",C.id),t=(0,E.query)((0,E.collection)(A.db,"bookedSlots"),(0,E.where)("endDate",">=",Z.$d),(0,E.where)("slot","==",e)),r=[],a=(0,E.onSnapshot)(t,e=>{!e.empty||(U(!1),P||I||R(!0)),e.forEach(e=>{let t=e.data();r.push({unavailableDateStart:t.startDate,unavailableDateEnd:t.endDate}),k(r),V(P,I,r)}),O()(P)<=Z||O()(I)<=O()(P)?R(!0):V(P,I,r)});return()=>a()}},[P,I,C?.id]),(0,o.useEffect)(()=>{z().catch(console.error)},[z,a]),(0,o.useEffect)(()=>{$().catch(console.error)},[$,C,a]),s.jsx(s.Fragment,{children:(0,s.jsxs)(n.Z,{onClose:t,onConfirm:r,children:[(0,s.jsxs)(f(),{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[s.jsx(x(),{className:"text-xl font-semibold text-gray-900 dark:text-white",variant:"h3",children:"Book a slot"}),(0,s.jsxs)(l.zx,{onClick:t,type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"default-modal",children:[s.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:s.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),s.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),(0,s.jsxs)(f(),{className:"p-4 md:p-5 space-y-4",children:[s.jsx(x(),{className:"text-base leading-relaxed text-gray-500 dark:text-gray-400",variant:"body2",children:"Book your favorite place"}),v?.length&&C&&(0,s.jsxs)(f(),{className:"text-white",children:[s.jsx(p(),{htmlFor:"slots",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Slots"}),s.jsx(l.Ph,{className:"bg-gray-50 text-white bordertext-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-40 dark:focus:ring-blue-500 dark:focus:border-blue-500",labelId:"slot",id:"slot",value:C,label:"Slots",placeholder:"Selected slot",onChange:e=>J(e),children:v?.map((e,t)=>s.jsx(w(),{value:e,children:e.location},e+t))})]}),(0,s.jsxs)(f(),{className:"text-white",children:[s.jsx(p(),{htmlFor:"slots",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Appointment start and end date"}),s.jsx(d.Z,{dates:{startDate:g[0],endDate:g[g.length-1]},notAvailable:F,onChangeStartDate:e=>(e&&L(e),e),onChangeEndDate:e=>(e&&M(e),e),isNewSlot:!0,isOnlyPreiview:!1})]}),(0,s.jsxs)(f(),{className:"text-white",children:[s.jsx(p(),{htmlFor:"slots",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Additional Information"}),s.jsx(l.nv,{sx:{"& .MuiInputBase-root":{width:"100%"},"& .MuiInputBase-input":{color:"#fff"}},className:"bg-gray-50 text-white bordertext-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-40 dark:focus:ring-blue-500 dark:focus:border-blue-500",id:"outlined-multiline-static",multiline:!0,rows:4,value:G,onChange:e=>_(e.target.value)})]})]}),(0,s.jsxs)(f(),{children:[s.jsx(x(),{className:"text-white px-6",children:g.length>0?"Upcoming occupied slots:":"No any occupied slots!"}),s.jsx(j(),{className:"text-white px-4",children:g&&g?.map(e=>s.jsx(N(),{className:"py-0",children:s.jsx(D(),{className:"text-white",primary:`${i.u6(e?.startDate,"ca")} to ${i.u6(e?.endDate,"ca")} from ${e?.user?.name?e?.user?.name:"Deleted User"}`})},e.id))})]}),s.jsx(f(),{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600",children:s.jsx(l.zx,{onClick:W,"data-modal-hide":"default-modal",type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",disabled:B,children:"Save"})})]})})};a()}catch(e){a(e)}})},26666:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>l});var s=r(26164),o=e([s]);let l=(s=(o.then?(await o)():o)[0]).Z;a()}catch(e){a(e)}})},19391:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>w});var s=r(20997),o=r(16689),l=r(90161),n=r(39588),i=r(38325),d=r(75922),c=r(58001),u=r(68349),m=r.n(u),h=r(26596),x=r.n(h),g=r(74460),f=r.n(g),y=r(37786),p=r.n(y),b=e([d]);d=(b.then?(await b)():b)[0];let w=({onClose:e,onConfirm:t})=>{let{setAlert:r}=(0,d.VY)(),a=Object.values(i.vV),[u,h]=(0,o.useState)(""),[g,y]=(0,o.useState)(""),[b,w]=(0,o.useState)(i.vV.CAR),[k,j]=(0,o.useState)(!0),v=async()=>{try{if(!(await fetch("/api/slots/createSlot",{body:JSON.stringify({type:b,location:u,description:g}),headers:c.A,method:"Post"})).ok)throw Error("Failed to create slot");t&&(r("","New slot is added","success"),t()),e()}catch(e){r("",`Error creating slot: ${e}`,"error"),console.error("Error creating slot:",e)}},N=e=>{w(e.target.value)};return(0,s.jsxs)(n.Z,{onClose:e,onConfirm:t,children:[(0,s.jsxs)(m(),{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[s.jsx(x(),{variant:"h3",className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Create a Slot"}),(0,s.jsxs)(l.zx,{onClick:e,type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"default-modal",children:[s.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:s.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 1l6 6m0 0l6 6M7 7l6-6M7 7L1 13"})}),s.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),(0,s.jsxs)(m(),{className:"p-4 md:p-5 space-y-4",children:[s.jsx(x(),{variant:"body2",className:"text-base leading-relaxed text-gray-500 dark:text-gray-400",children:"Enter slot information"}),(0,s.jsxs)(m(),{children:[s.jsx(f(),{htmlFor:"type",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Type"}),s.jsx(l.Ph,{className:"bg-gray-50 text-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500",labelId:"type-label",id:"type",value:b,onChange:e=>N,children:a.map((e,t)=>s.jsx(p(),{value:e,children:e},t))})]}),(0,s.jsxs)(m(),{children:[s.jsx(f(),{htmlFor:"location",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Location"}),s.jsx(l.nv,{sx:{"& .MuiInputBase-input":{color:"#fff"}},id:"location",value:u,onChange:e=>{let t=e.target.value;h(t),j(""!==t.trim())},multiline:!0,rows:4,className:"bg-gray-50 border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500",error:!k,helperText:!k&&"Location cannot be empty"})]}),(0,s.jsxs)(m(),{children:[s.jsx(f(),{htmlFor:"description",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Description"}),s.jsx(l.nv,{sx:{"& .MuiInputBase-input":{color:"#fff"}},id:"description",value:g,onChange:e=>{y(e.target.value)},multiline:!0,rows:4,className:"bg-gray-50 border-gray-300 text-white sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500"})]})]}),s.jsx(m(),{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600",children:s.jsx(l.zx,{onClick:v,type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800","data-modal-hide":"default-modal",children:"Save"})})]})};a()}catch(e){a(e)}})},50895:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>l});var s=r(19391),o=e([s]);let l=(s=(o.then?(await o)():o)[0]).Z;a()}catch(e){a(e)}})},79930:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>x});var s=r(20997);r(16689);var o=r(90161),l=r(39588),n=r(75922),i=r(58001),d=r(68349),c=r.n(d),u=r(26596),m=r.n(u),h=e([n]);n=(h.then?(await h)():h)[0];let x=({data:e,isBookedSlot:t=!0,onClose:r,onConfirm:a})=>{let{setAlert:d}=(0,n.VY)(),u=async a=>{if(a.preventDefault(),e?.id){try{await fetch(t?"/api/bookedSlots/deleteSlot":"/api/slots/deleteSlot",{body:JSON.stringify({...e}),headers:i.A,method:"DELETE"}).then(async r=>{d("","Booked Slot is removed","success"),!t&&r.ok&&await fetch("/api/bookedSlots/deleteSlots",{body:JSON.stringify({...e}),headers:i.A,method:"DELETE"})})}catch(e){console.log(e),d("",`${e}`,"error")}r()}};return s.jsx(s.Fragment,{children:(0,s.jsxs)(l.Z,{onClose:r,onConfirm:a,children:[(0,s.jsxs)(c(),{className:"flex items-center justify-center text-center p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[s.jsx(m(),{className:"text-xl font-semibold text-gray-900 dark:text-white",variant:"h3",children:"Delete a slot"}),(0,s.jsxs)(o.zx,{onClick:r,type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"default-modal",children:[s.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:s.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),s.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),s.jsx(c(),{className:"p-4 md:p-5 space-y-4",children:s.jsx(m(),{className:"text-base leading-relaxed text-gray-500 dark:text-gray-400",variant:"body2",children:"Are you sure you want to delete this slot"})}),s.jsx(c(),{className:"flex items-center justify-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600",children:s.jsx(o.zx,{onClick:u,"data-modal-hide":"default-modal",type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Delete"})})]})})};a()}catch(e){a(e)}})},96593:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>l});var s=r(79930),o=e([s]);let l=(s=(o.then?(await o)():o)[0]).Z;a()}catch(e){a(e)}})},87007:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>x});var s=r(20997);r(16689);var o=r(90161),l=r(39588),n=r(75922),i=r(58001),d=r(68349),c=r.n(d),u=r(26596),m=r.n(u),h=e([n]);n=(h.then?(await h)():h)[0];let x=({data:e,onClose:t,onConfirm:r})=>{let{setAlert:a}=(0,n.VY)(),d=async r=>{if(r.preventDefault(),e?.id){try{await fetch("/api/user/deleteUser",{body:JSON.stringify({...e}),headers:i.A,method:"PUT"}).then(async t=>{t.ok&&await fetch("/api/bookedSlots/deleteBookedSlotsByUser",{body:JSON.stringify({...e}),headers:i.A,method:"DELETE"})})}catch(e){console.log(e),a("",`${e}`,"error")}t(),a("",`User with email ${e.email} is deleted`,"success")}};return s.jsx(s.Fragment,{children:(0,s.jsxs)(l.Z,{onClose:t,onConfirm:r,children:[(0,s.jsxs)(c(),{className:"flex items-center justify-center text-center p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[s.jsx(m(),{className:"text-xl font-semibold text-gray-900 dark:text-white",variant:"h3",children:"Delete a user"}),(0,s.jsxs)(o.zx,{onClick:t,type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"default-modal",children:[s.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:s.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),s.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),s.jsx(c(),{className:"p-4 md:p-5 space-y-4",children:s.jsx(m(),{className:"text-base leading-relaxed text-gray-500 dark:text-gray-400",variant:"body2",children:"Are you sure you want to delete this user"})}),s.jsx(c(),{className:"flex items-center justify-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600",children:s.jsx(o.zx,{onClick:d,"data-modal-hide":"default-modal",type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Delete"})})]})})};a()}catch(e){a(e)}})},67900:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>l});var s=r(87007),o=e([s]);let l=(s=(o.then?(await o)():o)[0]).Z;a()}catch(e){a(e)}})},70778:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>C});var s=r(20997),o=r(16689),l=r(90161),n=r(77188),i=r(39588),d=r(87927),c=r(3093),u=r(75922),m=r(58001),h=r(1492),x=r(65937),g=r(27163),f=r.n(g),y=r(68349),p=r.n(y),b=r(74460),w=r.n(b),k=r(37786),j=r.n(k),v=r(1635),N=r.n(v),S=e([d,c,u,h,x]);[d,c,u,h,x]=S.then?(await S)():S;let D=N()(),C=({data:e,onClose:t,onConfirm:r,isOnlyRead:a})=>{let g=(0,c.LM)(e=>e.user),{setAlert:y}=(0,u.VY)(),[b,k]=(0,o.useState)([]),[v,S]=(0,o.useState)(null),[C,O]=(0,o.useState)(N()(e?.startDate)),[E,A]=(0,o.useState)(N()(e?.endDate)),[T,Z]=(0,o.useState)(e?.description),[P,L]=(0,o.useState)(!1),[I,M]=(0,o.useState)(!0),G=(0,o.useCallback)(t=>{let r=(0,h.doc)(x.db,"slots",t),a=(0,h.query)((0,h.collection)(x.db,"bookedSlots"),(0,h.where)("endDate",">=",D.toDate()),(0,h.where)("slot","==",r)),s=[];return(0,h.onSnapshot)(a,t=>{!t.empty||(L(!1),C||E||M(!0)),t.forEach(t=>{if(t.id!==e.id){let e=t.data();s.push({unavailableDateStart:e.startDate,unavailableDateEnd:e.endDate})}if(k(s),C&&E){let e=(0,d.o$)(C.toDate(),E.toDate(),s);M(e),L(e)}})})},[C,E,e.id]),_=async()=>{if(v&&C&&E&&g){let r={id:e?.id,user:g,slot:v,startDate:C,endDate:E,description:T};try{if(!(await fetch("/api/bookedSlots/updateSlot",{body:JSON.stringify(r),headers:m.A,method:"PUT"})).ok)throw Error("Failed to update the slot");y("","Slot is Updated","success"),t()}catch(e){console.error(e),y("",`${e}`,"error")}}};return(0,o.useEffect)(()=>{if(v?.id){let e=G(v.id);return()=>e()}},[G,v?.id]),(0,o.useEffect)(()=>{S(e?.slot)},[e]),s.jsx(s.Fragment,{children:(0,s.jsxs)(i.Z,{onClose:t,onConfirm:r,children:[(0,s.jsxs)(p(),{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[s.jsx(f(),{className:"text-xl font-semibold text-gray-900 dark:text-white",variant:"h3",children:a?"Info about booked slot":"Edit booked slot"}),(0,s.jsxs)(l.zx,{onClick:t,type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"default-modal",children:[s.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:s.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),s.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),(0,s.jsxs)(p(),{className:"p-4 md:p-5 space-y-4",children:[s.jsx(f(),{className:"text-base leading-relaxed text-gray-500 dark:text-gray-400",variant:"body2",children:"Update slot information"}),v&&(0,s.jsxs)(p(),{className:"text-white",children:[s.jsx(w(),{htmlFor:"slots",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Selected Slot"}),s.jsx(l.Ph,{className:"pointer-events-none opacity-70 bg-gray-50 text-white bordertext-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-40 dark:focus:ring-blue-500 dark:focus:border-blue-500",labelId:"slot",id:"slot",value:v,label:"Slots",placeholder:"Selected slot",children:s.jsx(j(),{children:v.location})})]}),(0,s.jsxs)(p(),{className:"text-white",children:[s.jsx(w(),{htmlFor:"slots",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Appointment start and end date"}),s.jsx(n.Z,{dates:{startDate:e.startDate,endDate:e.endDate},notAvailable:P,onChangeStartDate:e=>{O(e)},onChangeEndDate:e=>{A(e)},isNewSlot:!1,isOnlyPreiview:!1})]}),(0,s.jsxs)(p(),{className:"text-white",children:[s.jsx(w(),{htmlFor:"slots",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Additional Information"}),s.jsx(l.nv,{disabled:a,sx:{"& .MuiInputBase-root":{width:"100%"},"& .MuiInputBase-input":{color:"#fff"}},className:"bg-gray-50 text-white bordertext-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-40 dark:focus:ring-blue-500 dark:focus:border-blue-500",id:"outlined-multiline-static",multiline:!0,rows:4,value:T,onChange:e=>{Z(e.target.value)}})]})]}),!a&&s.jsx(p(),{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600",children:s.jsx(l.zx,{onClick:_,disabled:I,"data-modal-hide":"default-modal",type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Save"})})]})})};a()}catch(e){a(e)}})},69110:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>l});var s=r(70778),o=e([s]);let l=(s=(o.then?(await o)():o)[0]).Z;a()}catch(e){a(e)}})},30506:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>y});var s=r(20997),o=r(16689),l=r(90161),n=r(39588),i=r(75922),d=r(58001),c=r(68349),u=r.n(c),m=r(26596),h=r.n(m),x=r(74460),g=r.n(x),f=e([i]);i=(f.then?(await f)():f)[0];let y=({data:e,onClose:t,onConfirm:r,isOnlyRead:a})=>{let{setAlert:c}=(0,i.VY)(),[m,x]=(0,o.useState)(null),[f,y]=(0,o.useState)(e?.location||""),[p,b]=(0,o.useState)(e?.description||""),w=async()=>{if(m){let r={id:e?.id,type:e?.type,location:f,description:p};try{await fetch("/api/slots/updateSlot",{body:JSON.stringify(r),headers:d.A,method:"PUT"})}catch(e){console.error(e),c("",`${e}`,"error")}t(),c("","Slot is updated","success")}},k=e=>t=>{e(t.target.value)};return(0,o.useEffect)(()=>{x(e||null)},[e]),(0,s.jsxs)(n.Z,{onClose:t,onConfirm:r,children:[(0,s.jsxs)(u(),{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[s.jsx(h(),{variant:"h3",className:"text-xl font-semibold text-gray-900 dark:text-white",children:a?"Info about booked slot":"Edit booked slot"}),(0,s.jsxs)(l.zx,{onClick:t,type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"default-modal",children:[s.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:s.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 1l6 6m0 0l6 6M7 7l6-6M7 7L1 13"})}),s.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),(0,s.jsxs)(u(),{className:"p-4 md:p-5 space-y-4",children:[s.jsx(h(),{variant:"body2",className:"text-base leading-relaxed text-gray-500 dark:text-gray-400",children:"Update slot information"}),(0,s.jsxs)(u(),{children:[s.jsx(g(),{htmlFor:"location",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Location"}),s.jsx(l.nv,{id:"location",value:f,onChange:k(y),multiline:!0,rows:4,className:"bg-gray-50 text-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500",sx:{"& .MuiInputBase-root":{width:"100%"},"& .MuiInputBase-input":{color:"#fff"}}})]}),(0,s.jsxs)(u(),{children:[s.jsx(g(),{htmlFor:"description",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Description"}),s.jsx(l.nv,{id:"description",value:p,onChange:k(b),multiline:!0,rows:4,className:"bg-gray-50 text-white border-gray-300 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500",sx:{"& .MuiInputBase-root":{width:"100%"},"& .MuiInputBase-input":{color:"#fff"}}})]})]}),s.jsx(u(),{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600",children:s.jsx(l.zx,{onClick:w,type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800","data-modal-hide":"default-modal",children:"Save"})})]})};a()}catch(e){a(e)}})},18518:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>l});var s=r(30506),o=e([s]);let l=(s=(o.then?(await o)():o)[0]).Z;a()}catch(e){a(e)}})},39588:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(5152);let s=r.n(a)()(()=>Promise.resolve().then(r.bind(r,10202)),{loadableGenerated:{modules:["common/components/organisms/Modals/index.ts -> ./modal"]},ssr:!1})},10202:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(20997),s=r(39332),o=r(66405),l=r.n(o),n=r(19),i=r.n(n);let d=({onClose:e})=>a.jsx(i(),{className:"overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-20 bg-opacity-75 bg-black flex justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full h-full",onClick:e}),c=({onScroll:e,children:t})=>a.jsx(i(),{className:"fixed top-24 m-auto left-0 right-0 z-50 p-4 w-full max-w-2xl max-h-full",children:a.jsx(i(),{className:"relative bg-white rounded-lg shadow dark:bg-gray-800",onScroll:e,children:t})}),u=({children:e,onScroll:t,onClose:r,onConfirm:o})=>{let n=(0,s.useSearchParams)();return n?.get("modal"),(0,s.usePathname)(),(0,a.jsxs)(a.Fragment,{children:[l().createPortal(a.jsx(d,{onClose:r}),document.getElementById("modal-backdrop")),l().createPortal(a.jsx(c,{onConfirm:o,onScroll:t,children:e}),document.getElementById("modal-content"))]})}},52562:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>B});var s=r(20997),o=r(16689),l=r(41664),n=r.n(l),i=r(11163),d=r(61125),c=r(15678),u=r(3093),m=r(98298),h=r.n(m),x=r(13274),g=r.n(x),f=r(86104),y=r.n(f),p=r(26596),b=r.n(p),w=r(68349),k=r.n(w),j=r(28589),v=r.n(j),N=r(67935),S=r.n(N),D=r(37786),C=r.n(D),O=r(93302),E=r.n(O),A=r(78490),T=r.n(A),Z=r(56989),P=r.n(Z),L=r(63365),I=r.n(L),M=r(65848),G=r.n(M),_=e([c,u]);[c,u]=_.then?(await _)():_;let F=[{name:"Home",href:"/home",current:!1,isVisible:!0,adminOnly:!1},{name:"Sign In",href:"/sign-in",current:!0,isVisible:!1,adminOnly:!1},{name:"Booked slots",href:"/admin/booked-slots",current:!1,isVisible:!1,adminOnly:!0},{name:"Slots",href:"/admin/slots",current:!1,isVisible:!1,adminOnly:!0},{name:"Users",href:"/admin/users",current:!1,isVisible:!1,adminOnly:!0},{name:"Errors",href:"/admin/errors",current:!1,isVisible:!1,adminOnly:!0},{name:"Sign Up",href:"/sign-up",current:!1,isVisible:!1,adminOnly:!1}],U=[{name:"Profile",href:"/profile",current:!1,isVisible:!1,adminOnly:!1},{name:"My Booked Slots",href:"/my-slots",current:!1,isVisible:!1,adminOnly:!1}],B=()=>{let e=(0,i.useRouter)(),{user:t}=(0,u.LM)(),{logOut:r}=(0,c.a)(),[a,l]=(0,o.useState)([]),[m,x]=(0,o.useState)(null),[f,p]=(0,o.useState)(null),w=()=>{x(null)},j=t=>{"Logout"===t&&(r(),e.push("/sign-in")),p(null)};return(0,o.useEffect)(()=>{t?.role?l(t.role===d.g.ADMIN?F.filter(e=>e.isVisible||e.adminOnly):F.filter(e=>e.isVisible&&!e.adminOnly)):l(F.filter(e=>!e.adminOnly))},[t]),s.jsx(h(),{position:"static",color:"transparent",sx:{boxShadow:"none"},children:s.jsx(g(),{maxWidth:"xl",children:(0,s.jsxs)(y(),{disableGutters:!0,children:[(0,s.jsxs)(n(),{className:"flex justify-center items-center",href:"/home",children:[s.jsx(G(),{sx:{display:{xs:"none",md:"flex"},mr:1,fill:"whitesmoke"}}),s.jsx(b(),{variant:"h6",noWrap:!0,sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"whitesmoke",textDecoration:"none"},children:"LOGO"})]}),(0,s.jsxs)(k(),{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[s.jsx(v(),{className:"text-white",size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{x(e.currentTarget)},color:"inherit",children:s.jsx(I(),{})}),s.jsx(S(),{id:"menu-appbar",anchorEl:m,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!m,onClose:w,sx:{display:{xs:"block",md:"none"}},children:a.map(t=>s.jsx(C(),{onClick:w,children:s.jsx(n(),{href:t.href,className:e.pathname.indexOf(t.href)>-1?"text-black md:text-white":"text-gray-400 md:text-gray-500 hover:text-blue-700",children:s.jsx(b(),{textAlign:"center",children:t.name})})},t.href))})]}),s.jsx(G(),{sx:{display:{xs:"flex",md:"none"},mr:1,fill:"whitesmoke"}}),s.jsx(b(),{variant:"h5",noWrap:!0,component:"a",href:"#app-bar-with-responsive-menu",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"whitesmoke",textDecoration:"none"},children:"LOGO"}),s.jsx(k(),{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:a.map(t=>s.jsx(E(),{onClick:w,sx:{my:2,color:"black",display:"block"},children:s.jsx(n(),{href:t.href,className:e.pathname.indexOf(t.href)>-1?"text-white":"text-gray-500 hover:text-blue-700",children:s.jsx(b(),{textAlign:"center",children:t.name})})},t.href))}),t&&(0,s.jsxs)(k(),{sx:{flexGrow:0},children:[s.jsx(T(),{title:"Open User Menu",children:(0,s.jsxs)(v(),{onClick:e=>{p(e.currentTarget)},sx:{p:0},children:[s.jsx(b(),{className:"text-white mr-2",textAlign:"center",children:t.name||"Anonymous"}),s.jsx(P(),{alt:"User Profile",src:t?.photoUrl||"/assets/avatar.png"})]})}),(0,s.jsxs)(S(),{sx:{mt:"45px"},id:"menu-appbar",anchorEl:f,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!f,onClose:()=>j(""),children:[U.map(t=>s.jsx(C(),{onClick:()=>j(t.name),children:s.jsx(n(),{href:t.href,className:e.pathname.indexOf(t.href)>-1?"text-black":"text-gray-400 md:text-gray-500 hover:text-blue-700",children:s.jsx(b(),{textAlign:"center",children:t.name})})},t.href)),s.jsx(C(),{onClick:()=>j("Logout"),children:s.jsx(b(),{textAlign:"center",className:"text-blue-600 hover:text-blue-800",children:"Logout"})},"Logout")]})]})]})})})};a()}catch(e){a(e)}})},66459:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var a=r(20997),s=r(16689),o=r(90161),l=r(18103),n=r(32900),i=r(7292),d=r(6059),c=r(19),u=r.n(c),m=r(27163),h=r.n(m);let x=({title:e,message:t,show:r,setShow:c,variant:m})=>{if((0,s.useEffect)(()=>{if(r){let e=setTimeout(()=>{c(!1)},5e3);return()=>clearTimeout(e)}},[r,c]),!r)return null;let x={success:a.jsx(o.ZT,{additionalCss:"scale-75",icon:a.jsx(l.Z,{})}),error:a.jsx(o.ZT,{additionalCss:"scale-75",icon:a.jsx(n.Z,{})}),info:a.jsx(o.ZT,{additionalCss:"scale-75",icon:a.jsx(i.Z,{})}),warning:a.jsx(o.ZT,{additionalCss:"scale-75",icon:a.jsx(d.Z,{})})};return a.jsx(u(),{className:`z-50 fixed bottom-0 left-0 right-0 rounded-b px-4 py-3 shadow-md ${{success:"bg-teal-100 border-t-4 border-teal-500 text-teal-900",error:"bg-red-100 border-t-4 border-red-500 text-red-700",info:"bg-blue-100 border-t-4 border-blue-500 text-blue-700",warning:"bg-yellow-100 border-t-4 border-yellow-500 text-yellow-700"}[m]}`,role:"alert",children:(0,a.jsxs)(u(),{className:"flex items-center justify-center",children:[a.jsx(u(),{className:"py-1",children:x[m]}),(0,a.jsxs)(u(),{children:[a.jsx(h(),{className:"text-white text-4xl ml-0 mr-2 mt-3 mb-3 font-bold",variant:"h2",children:e}),a.jsx(h(),{variant:"h2",className:"text-xl pb-3",children:t})]})]})})}},91960:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>p});var s=r(20997),o=r(16689),l=r(63392),n=r(68349),i=r.n(n),d=r(56989),c=r.n(d),u=r(93302),m=r.n(u),h=r(26596),x=r.n(h),g=r(3093),f=r(75922),y=e([l,g,f]);[l,g,f]=y.then?(await y)():y;let p=({currentUser:e,setCurrentPhotoUrl:t})=>{let r=(0,g.LM)(e=>e.user),{setAlert:a}=(0,f.VY)(),[n,d]=(0,o.useState)(null),[u,h]=(0,o.useState)(!1),[y,p]=(0,o.useState)(r?.photoUrl||null);return s.jsx(i(),{className:"w-full h-full flex items-center bg-white rounded-lg shadow dark:border dark:bg-gray-800 dark:border-gray-700",sx:{justifyContent:"center"},children:(0,s.jsxs)(i(),{className:"p-6 h-full space-y-4 md:space-y-6 sm:p-8",children:[s.jsx(c(),{alt:"Profile Picture",src:y||e?.photoURL||"",sx:{width:170,height:170,margin:"auto"}}),s.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white",htmlFor:"file_input",children:"Upload file"}),s.jsx("input",{className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400","aria-describedby":"file_input_help",id:"file_input",type:"file",onChange:e=>{let t=e.target.files[0];d(t)}}),s.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-300",id:"file_input_help",children:"SVG, PNG, JPG or GIF."}),s.jsx(m(),{className:"text-white",onClick:()=>{if(!n){a("","No file selected","info");return}let r=(0,l.getStorage)(),s=(0,l.ref)(r,`profile_pictures/${e?.uid}`),o=(0,l.uploadBytesResumable)(s,n);h(!0),o.on("state_changed",e=>{},e=>{a("",`Error: ${e.message}`,"error"),h(!1)},()=>{(0,l.getDownloadURL)(o.snapshot.ref).then(e=>{p(e),t(e),a("","Photo uploaded successfully!","success"),h(!1)})})},disabled:u,children:u?s.jsx(x(),{variant:"body2",component:"p",textAlign:"center",className:"font-bold leading-tight tracking-tight text-blue-700 dark:text-blue-700",children:"Uploading"}):s.jsx(x(),{variant:"body2",component:"p",textAlign:"center",className:"font-bold leading-tight tracking-tight text-gray-900 dark:text-white",children:"Upload Photo"})}),s.jsx(x(),{variant:"h4",component:"h3",textAlign:"center",className:"font-bold leading-tight tracking-tight text-gray-900 dark:text-white",children:e?.displayName}),s.jsx(x(),{variant:"h5",component:"h4",textAlign:"center",className:"leading-tight tracking-tight text-gray-900 dark:text-white",children:r?.role})]})})};a()}catch(e){a(e)}})},49900:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var a=r(20997),s=r(19),o=r.n(s),l=r(27163),n=r.n(l),i=r(94192),d=r.n(i),c=r(834),u=r.n(c),m=r(41664),h=r.n(m),x=r(90161);let g=({tabs:e,onTabChange:t,activeTab:r=0})=>{let s=e=>e==r;return a.jsx(o(),{className:"border-b border-gray-200 dark:border-gray-700",children:a.jsx(d(),{className:"flex -mb-px text-sm font-medium text-center text-gray-500 dark:text-gray-400 p-1",children:e.map((e,r)=>a.jsx(u(),{className:`mr-2 p-1 ${s(r)?"border-b-2 border-white":"border-b-1 border-b-ivory-3"}`,children:(0,a.jsxs)(h(),{onClick:()=>t(r),href:"#",className:`inline-flex items-center justify-center p-2 md:p-4 border-b-2 border-transparent rounded-t-lg hover:text-white ${s(r)?"text-white":""} group`,children:[a.jsx(x.ZT,{additionalCss:"mr-2",icon:a.jsx(e.icon,{})}),a.jsx(n(),{className:"text-lg md:text-xl",children:e.name})]})},r))})})}},25918:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{$_:()=>s.Z,CK:()=>b.Z,Iq:()=>h.Z,KT:()=>i.Z,Mi:()=>g.Z,P_:()=>y.Z,T0:()=>m.Z,WS:()=>f.Z,Xr:()=>c.Z,YY:()=>p.Z,cP:()=>d.Z,ie:()=>u.Z,kL:()=>n.Z,kj:()=>x.Z,lc:()=>l.Z,wp:()=>o.Z});var s=r(8036),o=r(52562),l=r(27121),n=r(59565);r(10202);var i=r(49900),d=r(96593),c=r(18518),u=r(50895),m=r(67900),h=r(26666),x=r(69110),g=r(45495),f=r(94005),y=r(66459),p=r(91960),b=r(99574),w=e([s,o,l,n,d,c,u,m,h,x,g,f,p,b]);[s,o,l,n,d,c,u,m,h,x,g,f,p,b]=w.then?(await w)():w,a()}catch(e){a(e)}})},30632:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>c});var s=r(20997),o=r(25918),l=r(44394),n=r(19),i=r.n(n),d=e([o,l]);[o,l]=d.then?(await d)():d;let c=({children:e})=>(0,s.jsxs)(l.e,{children:[s.jsx(o.wp,{}),s.jsx("main",{className:"min-h-[79vh] md:min-h-[75vh]",children:e}),s.jsx(i(),{id:"modal-backdrop"}),s.jsx(i(),{id:"modal-content"}),s.jsx(o.$_,{})]});a()}catch(e){a(e)}})},44394:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{e:()=>c});var s=r(16689),o=r(87927),l=r(3093),n=r(58001),i=r(22880),d=e([o,l,i]);[o,l,i]=d.then?(await d)():d;let c=({children:e})=>{let[t,r]=(0,s.useState)(null),a=(0,s.useCallback)(async e=>{if(e?.user_id)try{await fetch("/api/user/getUser",{body:JSON.stringify(e),headers:n.A,method:"Post"}).then(async e=>{let t=await e.json();t&&(l.LM.setState({user:t}),l.MJ.setState({favoriteSlots:t.favoriteSlots}))})}catch(e){console.log(e)}},[]),d=(0,s.useCallback)(async()=>{try{await fetch("/api/errors/deleteErrors",{headers:n.A,method:"DELETE"})}catch(e){console.log(e)}},[]);return(0,s.useEffect)(()=>{let e=(0,o.ej)("authToken");if(e&&"null"!==e){let t=(0,i.jwtDecode)(e);r(t),d().catch(console.error)}},[]),(0,s.useEffect)(()=>{a(t).catch(console.error)},[t,a]),e};a()}catch(e){a(e)}})},83899:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{X:()=>s.Z});var s=r(30632),o=e([s]);s=(o.then?(await o)():o)[0],a()}catch(e){a(e)}})},58001:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a={"Content-Type":"application/json"}},67242:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>f});var s=r(65937),o=r(60401),l=r(61125),n=r(3093),i=r(87927),d=r(26601),c=r(70115),u=r(58001),m=e([s,o,n,i]);[s,o,n,i]=m.then?(await m)():m;let h=e=>({...e,isDeleted:!1,role:l.g.NORMAL,favoriteSlots:[],dateCreated:new Date(Date.now())}),x=async(e,t)=>{try{let r=await fetch("/api/user/createUser",{body:JSON.stringify({...e}),headers:u.A,method:"POST"});if(!r.ok){(0,i.d8)("authToken",null),(0,i.d8)("userToken",null);let e=(0,c.Q)("Internal Server Error",null);n.Xt.setState({error:e.message}),await fetch("/api/errors/createError",{body:JSON.stringify({...e}),headers:u.A,method:"POST"})}if(r.ok){let e=await r.json();g(e,t)}else{let e=await r.json();console.log(e.message)}}catch(t){let e=(0,c.Q)("An unexpected error occurred in handleLogInUser"+t,e?.email);n.Xt.setState({error:e.message}),await fetch("/api/errors/createError",{body:JSON.stringify({...e}),headers:u.A,method:"POST"}),console.log("An unexpected error occurred in handleCreateUser => ",t)}},g=async(e,t)=>{try{await fetch("/api/user/getUser",{body:JSON.stringify({email:e.email}),headers:u.A,method:"Post"}).then(async e=>{if(!e.ok){(0,i.d8)("authToken",null),(0,i.d8)("userToken",null);let e=(0,c.Q)("Internal Server Error",null);n.Xt.setState({error:e.message}),await fetch("/api/errors/createError",{body:JSON.stringify({...e}),headers:u.A,method:"POST"})}let r=await e.json();if(r&&e.ok){let e={role:r.role,email:r.email,name:r.name};(0,i.d8)("userToken",btoa(JSON.stringify(e)),{expires:7}),n.tN.setState({authToken:t}),n.LM.setState({user:r}),n.MJ.setState({favoriteSlots:r.favoriteSlots})}}).catch(async e=>{console.log("error in handleLogInUser",e)})}catch(r){let t=(0,c.Q)("An unexpected error occurred in handleLogInUser"+r,e.email);n.Xt.setState({error:t.message}),await fetch("/api/errors/createError",{body:JSON.stringify({...t}),headers:u.A,method:"POST"}),console.log("An unexpected error occurred in handleLogInUser => ",r)}},f=()=>{let e=async()=>{let e=new o.GoogleAuthProvider;await (0,o.signInWithPopup)(s.l,e).then(async e=>{if(!e.user||!e.user.email)throw Error("Google Sign IN failed");let t=e?.user?.accessToken;(0,i.d8)("authToken",t,{expires:7});let r=h({email:e.user.email,name:e.user.displayName||"",password:""});g(r,t)}).catch(async e=>{var t=e.code;let r=(0,c.Q)(t,null);n.Xt.setState({error:r.message}),await fetch("/api/errors/createError",{body:JSON.stringify({...r}),headers:u.A,method:"POST"})})},t=async()=>{let e=new o.GoogleAuthProvider;await (0,o.signInWithPopup)(s.l,e).then(async e=>{if(!e.user||!e.user.email)throw Error("Google Sign UP failed");let t=e?.user?.accessToken;(0,i.d8)("authToken",t,{expires:7});let r=h({email:e.user.email,name:e.user.displayName||"",password:""}),a="google.com"==e.providerId?d.x.GOOLGE_LOGIN:d.x.PASSWORD_LOGIN;x({...r,provider:a},t)}).catch(async e=>{var t=e.code;let r=(0,c.Q)(t,null);n.Xt.setState({error:r.message}),await fetch("/api/errors/createError",{body:JSON.stringify({...r}),headers:u.A,method:"POST"})})},r=async(e,t,r)=>(0,o.createUserWithEmailAndPassword)(s.l,e,t).then(async a=>{let s=a?.user?.accessToken;(0,i.d8)("authToken",s,{expires:7});let o=h({email:e,name:r,password:t});x(o,s)}).catch(async t=>{var r=t.code;let a=(0,c.Q)(r,e);n.Xt.setState({error:a.message}),await fetch("/api/errors/createError",{body:JSON.stringify({...a}),headers:u.A,method:"POST"})}),a=async(e,t)=>{(0,o.signInWithEmailAndPassword)(s.l,e,t).then(async t=>{console.log("User credential",t.user);let r=t?.user?.accessToken;(0,i.d8)("authToken",r,{expires:7});try{console.log("thanks!",t),await fetch("/api/user/getUser",{body:JSON.stringify({email:e}),headers:u.A,method:"Post"}).then(async e=>{let t=await e.json();if(t){let e={role:t.role,email:t.email,name:t.name};(0,i.d8)("userToken",btoa(JSON.stringify(e)),{expires:7}),n.tN.setState({authToken:r}),n.LM.setState({user:t}),n.MJ.setState({favoriteSlots:t.favoriteSlots})}})}catch(e){console.log(e)}}).catch(async t=>{var r=t.code,a=t.message;let s=(0,c.Q)(r,e);n.Xt.setState({error:s.message}),await fetch("/api/errors/createError",{body:JSON.stringify({...s}),headers:u.A,method:"POST"}),"auth/invalid-credential"===r?console.error("Invalid credential: ",a):console.error(r,a)})},l=async()=>{await (0,o.signOut)(s.l).then(()=>{(0,i.d8)("authToken",null),(0,i.d8)("userToken",null),n.tN.setState({authToken:null}),n.LM.setState({user:null}),n.MJ.setState({favoriteSlots:[]})})},m=async e=>{await (0,o.sendPasswordResetEmail)(s.l,e),console.log("Password reset email sent")};return{onAuthStateChanged:e=>(0,o.onAuthStateChanged)(s.l,e),signInWithGoogle:e,signUpWithGoogle:t,signUp:r,logIn:a,logOut:l,triggerResetEmail:m}};a()}catch(e){a(e)}})},15678:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{a:()=>s.Z});var s=r(67242),o=e([s]);s=(o.then?(await o)():o)[0],a()}catch(e){a(e)}})},33952:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>l});var s=r(66912),o=e([s]);s=(o.then?(await o)():o)[0];let l=(0,s.create)(e=>({authToken:null,setAuthToken:t=>e({authToken:t})}));a()}catch(e){a(e)}})},69105:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>l});var s=r(66912),o=e([s]);s=(o.then?(await o)():o)[0];let l=(0,s.create)()(e=>({error:null,setError:t=>e({error:t})}));a()}catch(e){a(e)}})},40624:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>l});var s=r(66912),o=e([s]);s=(o.then?(await o)():o)[0];let l=(0,s.create)()(e=>({favoriteSlots:[],setFavoriteSlots:t=>e({favoriteSlots:t})}));a()}catch(e){a(e)}})},3093:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{LM:()=>o.Z,MJ:()=>l.Z,Rr:()=>n.Z,Xt:()=>i.Z,tN:()=>s.Z});var s=r(33952),o=r(79554),l=r(40624),n=r(36140),i=r(69105),d=e([s,o,l,n,i]);[s,o,l,n,i]=d.then?(await d)():d,a()}catch(e){a(e)}})},36140:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>l});var s=r(66912),o=e([s]);s=(o.then?(await o)():o)[0];let l=(0,s.create)()(e=>({slotsArray:[],setSlotsArray:()=>e(e=>({slotsArray:e.slotsArray}))}));a()}catch(e){a(e)}})},79554:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>l});var s=r(66912),o=e([s]);s=(o.then?(await o)():o)[0];let l=(0,s.create)(e=>({user:null,setUser:t=>e({user:t})}));a()}catch(e){a(e)}})},70115:(e,t,r)=>{"use strict";r.d(t,{Q:()=>s});let a={"auth/app-deleted":{code:"auth/app-deleted",message:"The Firebase app was deleted."},"auth/too-many-requests":{code:"auth/too-many-requests",message:"Access to this account has been temporarily disabled due to many failed login attempts."},"auth/invalid-credential":{code:"auth/invalid-credential",message:"Invalid credential."},"auth/app-not-authorized":{code:"auth/app-not-authorized",message:"This app is not authorized to use Firebase Authentication."},"auth/argument-error":{code:"auth/argument-error",message:"An invalid argument was provided."},"auth/invalid-api-key":{code:"auth/invalid-api-key",message:"Your API key is invalid, please check you have copied it correctly."},"auth/invalid-user-token":{code:"auth/invalid-user-token",message:"The user's credential is no longer valid. The user must sign in again."},"auth/network-request-failed":{code:"auth/network-request-failed",message:"A network error (such as timeout, interrupted connection or unreachable host) has occurred."},"auth/user-disabled":{code:"auth/user-disabled",message:"The user account has been disabled by an administrator."},"auth/user-not-found":{code:"auth/user-not-found",message:"There is no user record corresponding to this identifier. The user may have been deleted."},"auth/wrong-password":{code:"auth/wrong-password",message:"The password is invalid or the user does not have a password."},"firestore/cancelled":{code:"firestore/cancelled",message:"The operation was cancelled."},"firestore/unknown":{code:"firestore/unknown",message:"Unknown error or an error from a different domain."},"firestore/invalid-argument":{code:"firestore/invalid-argument",message:"Client specified an invalid argument."},"firestore/deadline-exceeded":{code:"firestore/deadline-exceeded",message:"Deadline expired before operation could complete."},"firestore/not-found":{code:"firestore/not-found",message:"Some requested document was not found."},"firestore/already-exists":{code:"firestore/already-exists",message:"Some document that we attempted to create already exists."},"firestore/permission-denied":{code:"firestore/permission-denied",message:"The caller does not have permission to execute the specified operation."},"firestore/resource-exhausted":{code:"firestore/resource-exhausted",message:"Some resource has been exhausted, perhaps a per-user quota, or perhaps the entire file system is out of space."},"firestore/failed-precondition":{code:"firestore/failed-precondition",message:"Operation was rejected because the system is not in a state required for the operation's execution."},"firestore/unimplemented":{code:"firestore/unimplemented",message:"Operation is not implemented or not supported/enabled."},"firestore/internal":{code:"firestore/internal",message:"Internal errors. Means some invariants expected by underlying system has been broken. If you see one of these errors, something is very broken."},"firestore/unavailable":{code:"firestore/unavailable",message:"The service is currently unavailable. This is most likely a transient condition and may be corrected by retrying with a backoff."},"firestore/data-loss":{code:"firestore/data-loss",message:"Unrecoverable data loss or corruption."},"firestore/unauthenticated":{code:"firestore/unauthenticated",message:"The request does not have valid authentication credentials for the operation."}};function s(e,t){return{code:a[e]?.code||"000",message:a[e]?.message||e,user:t,dateCreated:new Date(Date.now())}}},61125:(e,t,r)=>{"use strict";var a,s;r.d(t,{X:()=>a,g:()=>s}),function(e){e.GOOGLE="Google",e.APPLE="Apple",e.NORMAL="Normal"}(a||(a={})),function(e){e.ADMIN="Admin",e.NORMAL="Normal"}(s||(s={}))},38325:(e,t,r)=>{"use strict";var a,s,o,l;r.d(t,{SD:()=>o,YZ:()=>l,vV:()=>a}),function(e){e.CAR="car_slot",e.DESK="desk_slot"}(a||(a={})),function(e){e.ALL_NEXT_SLOTS="all_next_slots",e.ALL_SLOTS_BY_USER="all_past_slots"}(s||(s={})),function(e){e.NOT_STARTED="not started",e.IN_PROGRESS="in progress",e.COMPLETED="completed"}(o||(o={})),function(e){e.RED="bg-red-500",e.ORANGE="bg-orange-400",e.GREEN="bg-green-500"}(l||(l={}))},26601:(e,t,r)=>{"use strict";var a;r.d(t,{x:()=>a}),function(e){e.GOOLGE_LOGIN="GOOLGE_LOGIN",e.PASSWORD_LOGIN="PASSWORD_LOGIN"}(a||(a={}))},87927:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{AP:()=>d,SB:()=>p,_r:()=>y,d8:()=>c,ej:()=>u,o$:()=>i,u6:()=>g});var s=r(69915),o=r(22880),l=r(38325);r(1635);var n=e([s,o]);function i(e,t,r){if(!r||0==r.length)return!1;let a=!1;return r.forEach(r=>{let s=r.unavailableDateStart.toDate(),o=r.unavailableDateEnd.toDate();if(e<=s&&s<=t||e<=o&&o<=t||s<e&&t<o)return a=!0}),a}function d(e,t,r){return r<e?l.SD.NOT_STARTED:r>=e&&r<=t?l.SD.IN_PROGRESS:r>t?l.SD.COMPLETED:void 0}[s,o]=n.then?(await n)():n;let c=(e,t,r={})=>{s.default.set(e,t,r)},u=e=>s.default.get(e),m=e=>new Intl.DateTimeFormat("en-gb",{hour:"2-digit",minute:"2-digit",hourCycle:e}),h=e=>new Intl.DateTimeFormat(e||"fr-ca",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),x=e=>m("h23").format(e),g=(e,t)=>h(t).format(e),f=e=>e.replace(/\.000Z$/,""),y=e=>e.map(e=>{let t=`(${x(new Date(e.startDate))} - ${x(new Date(e.endDate))}) - ${e.slot.location} => ${e.user.name}`;return{id:e.id,start:f(e.startDate),end:f(e.endDate),title:t,slot:e.slot,user:e.user}}),p=e=>{let t=e.startDate,r=e.endDate,a=new Date,s=r.getTime()-t.getTime(),o=Math.max(a.getTime()-t.getTime(),0);return s>0?o/s*100:0};a()}catch(e){a(e)}})},65937:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{db:()=>u,l:()=>c});var s=r(60401),o=r(23745),l=r(1492),n=e([s,o,l]);[s,o,l]=n.then?(await n)():n;let i={apiKey:"AIzaSyBAI-87XyibdZseoJ6A82ITPOKwCPFYKvg",authDomain:"parking-system-65efd.firebaseapp.com",projectId:"parking-system-65efd",storageBucket:"parking-system-65efd.appspot.com",messagingSenderId:"362463237115",appId:"1:362463237115:web:2318fbeb1489d76c2c315e",measurementId:process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},d=0===(0,o.getApps)().length?(0,o.initializeApp)(i):(0,o.getApps)()[0],c=(0,s.getAuth)(d),u=(0,l.getFirestore)(d);a()}catch(e){a(e)}})},64163:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>i});var s=r(20997);r(30108);var o=r(83899),l=r(75922);r(4260),r(68401),r(87524),r(26867);var n=e([o,l]);function i({Component:e,pageProps:t}){return s.jsx(o.X,{children:s.jsx(l.uZ,{children:(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.hE,{}),s.jsx(e,{...t})]})})})}[o,l]=n.then?(await n)():n,a()}catch(e){a(e)}})},97208:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>i});var s=r(20997),o=r(25918),l=r(62969),n=e([o]);o=(n.then?(await n)():n)[0];let i=()=>{let{title:e,text:t,type:r,show:a,setShow:n}=(0,l.Z)();return s.jsx(o.P_,{title:e,message:t,show:a,setShow:n,variant:r})};a()}catch(e){a(e)}})},85719:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i,u:()=>n});var a=r(20997),s=r(16689);let o={title:"",text:"",show:!1,type:"success"},l=(0,s.createContext)({...o,setAlert:()=>{},setShow:()=>{}}),n=({children:e})=>{let[t,r]=(0,s.useState)(o);return(0,s.useEffect)(()=>{if(t.show){let e=setTimeout(()=>r(e=>({...e,show:!1})),5e3);return()=>clearTimeout(e)}},[t.show]),a.jsx(l.Provider,{value:{...t,setAlert:(e,t,a)=>{r(r=>({...r,title:e,text:t,type:a,show:!1})),setTimeout(()=>{r(e=>({...e,show:!0}))},300)},setShow:e=>{r(t=>({...t,show:e}))}},children:e})},i=l},62969:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(16689),s=r(85719);let o=()=>(0,a.useContext)(s.Z)},75922:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{VY:()=>l.Z,hE:()=>o.Z,uZ:()=>s.u});var s=r(85719),o=r(97208),l=r(62969),n=e([o]);o=(n.then?(await n)():n)[0],a()}catch(e){a(e)}})},30108:()=>{}};