"use strict";(()=>{var e={};e.id=18,e.ids=[18],e.modules={1635:e=>{e.exports=require("dayjs")},20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},23745:e=>{e.exports=import("firebase/app")},60401:e=>{e.exports=import("firebase/auth")},1492:e=>{e.exports=import("firebase/firestore")},69915:e=>{e.exports=import("js-cookie")},22880:e=>{e.exports=import("jwt-decode")},56249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},57237:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>l,default:()=>c,routeModule:()=>u});var s=a(71802),o=a(47153),n=a(56249),i=a(10495),d=e([i]);i=(d.then?(await d)():d)[0];let c=(0,n.l)(i,"default"),l=(0,n.l)(i,"config"),u=new s.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/bookedSlots/getSlotsByUser",pathname:"/api/bookedSlots/getSlotsByUser",bundlePath:"",filename:""},userland:i});r()}catch(e){r(e)}})},75425:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{F:()=>d});var s=a(68256),o=a(65388),n=a(1492),i=e([s,o,n]);[s,o,n]=i.then?(await i)():i;let d=async e=>{if(!e||!e.id||!e.email)throw Error("Invalid input data");let t=(0,n.query)((0,n.collection)(o.db,"users"),(0,n.where)("email","==",e.email)),a=await (0,n.getDocs)(t);if(a.empty)throw Error("User not found");let r=a.docs[0].id,i=(0,n.query)((0,n.collection)(o.db,"bookedSlots"),(0,n.where)("user","==",(0,n.doc)(o.db,"users",r))),d=await (0,n.getDocs)(i);if(d.empty)return console.log("No documents found!"),[];try{return(await Promise.all(d.docs.map(async e=>{let t=await (0,n.getDoc)(e.data().slot),a=await (0,n.getDoc)(e.data().user);return t.exists()&&a.exists()?{id:e.id,user:(0,s.yY)(a),slot:(0,s.yY)(t),startDate:e.data().startDate.toDate(),endDate:e.data().endDate.toDate(),description:e.data().description}:null}))).filter(e=>null!==e)}catch(e){throw console.error("Error getting documents: ",e),Error(`Failed to retrieve bookedSlots by user: ${e.message}`)}};r()}catch(e){r(e)}})},55289:(e,t,a)=>{var r,s,o,n;a.d(t,{vV:()=>r}),function(e){e.CAR="car_slot",e.DESK="desk_slot"}(r||(r={})),function(e){e.ALL_NEXT_SLOTS="all_next_slots",e.ALL_SLOTS_BY_USER="all_past_slots"}(s||(s={})),function(e){e.NOT_STARTED="not started",e.IN_PROGRESS="in progress",e.COMPLETED="completed"}(o||(o={})),function(e){e.RED="bg-red-500",e.ORANGE="bg-orange-400",e.GREEN="bg-green-500"}(n||(n={}))},68256:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{yY:()=>i});var s=a(69915),o=a(22880);a(55289),a(1635);var n=e([s,o]);function i(e){return e.exists?{id:e.id,...e.data()}:null}[s,o]=n.then?(await n)():n,r()}catch(e){r(e)}})},65388:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{db:()=>l});var s=a(60401),o=a(23745),n=a(1492),i=e([s,o,n]);[s,o,n]=i.then?(await i)():i;let d={apiKey:"AIzaSyBAI-87XyibdZseoJ6A82ITPOKwCPFYKvg",authDomain:"parking-system-65efd.firebaseapp.com",projectId:"parking-system-65efd",storageBucket:"parking-system-65efd.appspot.com",messagingSenderId:"362463237115",appId:"1:362463237115:web:2318fbeb1489d76c2c315e",measurementId:process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},c=0===(0,o.getApps)().length?(0,o.initializeApp)(d):(0,o.getApps)()[0];(0,s.getAuth)(c);let l=(0,n.getFirestore)(c);r()}catch(e){r(e)}})},10495:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>n});var s=a(75425),o=e([s]);async function n(e,t){let{user:a}=e.body;if(!a){t.status(400).json({message:"User is required"});return}try{let e=await (0,s.F)(a);e?t.status(200).json(e):t.status(404).json(null)}catch(a){let e={message:a.message};t.status(500).json(e)}}s=(o.then?(await o)():o)[0],r()}catch(e){r(e)}})},47153:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},71802:(e,t,a)=>{e.exports=a(20145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var a=t(t.s=57237);module.exports=a})();