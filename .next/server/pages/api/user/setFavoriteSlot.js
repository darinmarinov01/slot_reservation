"use strict";(()=>{var e={};e.id=23,e.ids=[23],e.modules={20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},23745:e=>{e.exports=import("firebase/app")},60401:e=>{e.exports=import("firebase/auth")},1492:e=>{e.exports=import("firebase/firestore")},56249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},99578:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>d,default:()=>c,routeModule:()=>p});var i=a(71802),n=a(47153),o=a(56249),s=a(31936),u=e([s]);s=(u.then?(await u)():u)[0];let c=(0,o.l)(s,"default"),d=(0,o.l)(s,"config"),p=new i.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/user/setFavoriteSlot",pathname:"/api/user/setFavoriteSlot",bundlePath:"",filename:""},userland:s});r()}catch(e){r(e)}})},48522:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{_:()=>s});var i=a(1492),n=a(65388),o=e([i,n]);[i,n]=o.then?(await o)():o;let s=async(e,t,a)=>{let r=e&&e.id?(0,i.doc)(n.db,"users",e.id):null;if(!r)throw Error("User reference is null");try{a?await (0,i.updateDoc)(r,{favoriteSlots:(0,i.arrayRemove)(t)}):await (0,i.updateDoc)(r,{favoriteSlots:(0,i.arrayUnion)(t)});let e=await (0,i.getDoc)(r);if(!e.exists())throw Error("No such document!");let n=e.data();if(n)return n;throw Error("No user data found!")}catch(e){throw e}};r()}catch(e){r(e)}})},65388:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{db:()=>d});var i=a(60401),n=a(23745),o=a(1492),s=e([i,n,o]);[i,n,o]=s.then?(await s)():s;let u={apiKey:"AIzaSyBAI-87XyibdZseoJ6A82ITPOKwCPFYKvg",authDomain:"parking-system-65efd.firebaseapp.com",projectId:"parking-system-65efd",storageBucket:"parking-system-65efd.appspot.com",messagingSenderId:"362463237115",appId:"1:362463237115:web:2318fbeb1489d76c2c315e",measurementId:process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},c=0===(0,n.getApps)().length?(0,n.initializeApp)(u):(0,n.getApps)()[0];(0,i.getAuth)(c);let d=(0,o.getFirestore)(c);r()}catch(e){r(e)}})},31936:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>o});var i=a(48522),n=e([i]);async function o(e,t){let{user:a,slot:r,toggle:n}=e.body;try{let e=await (0,i._)(a,r,n);t.status(200).json(e)}catch(a){let e={message:a.message};t.status(500).json(e)}}i=(n.then?(await n)():n)[0],r()}catch(e){r(e)}})},47153:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},71802:(e,t,a)=>{e.exports=a(20145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var a=t(t.s=99578);module.exports=a})();