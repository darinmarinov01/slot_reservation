(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[646],{9821:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-slots",function(){return l(3083)}])},5757:function(e,t,l){"use strict";var s,a;l.d(t,{o:function(){return s}}),(a=s||(s={})).NO_UPCOMMING_BOOKINGS="There are none existing upcomming bookings",a.NO_TODAYS_BOOKINGS="There are none existing todays bookings",a.NO_PAST_BOOKINGS="There are none existing past bookings",a.NO_FAVORITE_SLOTS="There are none existing favorite slots",a.NO_SLOTS="There are none existing slots",a.NO_USERS="There are none existing users"},3083:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return b}});var s=l(5893),a=l(7294),n=l(9008),r=l.n(n);l(109);var i=l(5757),o=l(8572),c=l(775),d=l(2224),x=l(543),m=l(9320),g=l(3563),h=l(7484),u=l.n(h);let f=a.forwardRef(function(e,t){let{title:l,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),l?a.createElement("title",{id:s},l):null,a.createElement("path",{fillRule:"evenodd",d:"M10.5 3.798v5.02a3 3 0 0 1-.879 2.121l-2.377 2.377a9.845 9.845 0 0 1 5.091 1.013 8.315 8.315 0 0 0 5.713.636l.285-.071-3.954-3.955a3 3 0 0 1-.879-2.121v-5.02a23.614 23.614 0 0 0-3 0Zm4.5.138a.75.75 0 0 0 .093-1.495A24.837 24.837 0 0 0 12 2.25a25.048 25.048 0 0 0-3.093.191A.75.75 0 0 0 9 3.936v4.882a1.5 1.5 0 0 1-.44 1.06l-6.293 6.294c-1.62 1.621-.903 4.475 1.471 4.88 2.686.46 5.447.698 8.262.698 2.816 0 5.576-.239 8.262-.697 2.373-.406 3.092-3.26 1.47-4.881L15.44 9.879A1.5 1.5 0 0 1 15 8.818V3.936Z",clipRule:"evenodd"}))});var p=l(5606);let w=u()(),N=w.endOf("day"),j=w.startOf("day");var b=()=>{let e=(0,o.LM)(e=>e.user),{slotsArray:t}=(0,o.Rr)(),{favoriteSlots:l}=(0,o.MJ)(),n=[{name:"Booking history",icon:f},{name:"Favorites",icon:p.Z}],[h,b]=(0,a.useState)([]),[y,v]=(0,a.useState)([]),[O,S]=(0,a.useState)([]),[Z,_]=(0,a.useState)(),[k,T]=(0,a.useState)(0),[C,D]=(0,a.useState)(!1),[E,A]=(0,a.useState)(!1),[I,P]=(0,a.useState)(!1),B=(0,a.useCallback)(async()=>{if(e){let t=await fetch("/api/bookedSlots/getSlotsByUser",{body:JSON.stringify({user:e}),headers:x.A,method:"POST"});if(t.ok){let e=await t.json();b([]),v([]),S([]),e.forEach(async e=>{if(e){let t=u()(e.startDate),l=u()(e.endDate);e.progress=R(e),e.startDate=new Date(e.startDate),e.endDate=new Date(e.endDate),l<w?S(t=>[...t,e]):(t>=j||t<=j)&&t<=N?v(t=>[...t,e]):t>w&&b(t=>[...t,e])}})}else console.log((await t.json()).message)}},[e,C,I,k]),M=(0,a.useCallback)(async()=>{let s=U(l,t);s&&s.length>0&&s.forEach(async t=>{await fetch("/api/user/setFavoriteSlot",{body:JSON.stringify({user:e,slot:t,toggle:!0}),headers:x.A,method:"POST"}).then(async e=>{let t=await e.json();o.MJ.setState({favoriteSlots:t.favoriteSlots})})})},[]),F=e=>{_(e),D(!0)},G=e=>{_(e),A(!0)},L=e=>{_(e),P(!0)},H=()=>{D(!1),P(!1),A(!1)},K=()=>{H()},R=e=>{if(null==e?void 0:e.id){let t=u()(e.startDate),l=u()(e.endDate);return(0,d.AP)(t,l,w)}},U=(e,t)=>{let l=t.map(e=>e.id);return e.filter(e=>!l.includes(e.id))};return(0,a.useEffect)(()=>{B().catch(console.error)},[B]),(0,a.useEffect)(()=>{M().catch(console.error)},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r(),{children:[(0,s.jsx)("title",{children:"My All Slots"}),(0,s.jsx)("meta",{name:"description",content:"All slots to current user"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,s.jsxs)("section",{className:"bg-gray-50 dark:bg-gray-900",children:[C&&(0,s.jsx)(c.kj,{data:Z,onClose:H,onConfirm:K}),I&&Z&&(0,s.jsx)(c.cP,{data:Z,isBookedSlot:!0,onClose:H,onConfirm:K}),E&&e&&(0,s.jsx)(c.Iq,{data:Z,onClose:H,onConfirm:K}),(0,s.jsx)(c.KT,{tabs:n,onTabChange:e=>{T(e)},activeTab:k}),0==k&&(0,s.jsxs)(s.Fragment,{children:[h&&(0,s.jsxs)(g.Z,{className:"mx-auto max-w-2xl px-4 py-6 sm:px-6 sm:py-10 lg:max-w-7xl lg:px-8",children:[(0,s.jsx)(m.Z,{className:"text-white text-xl md:text-4xl ml-0 mr-2 mt-3 mb-3 font-bold",variant:"h2",children:" Upcomming bookings: "}),(0,s.jsx)(g.Z,{className:"border-gray-200 w-full border-2 mt-2 mb-8"}),(0,s.jsx)(g.Z,{className:"grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:gap-x-8",children:null==h?void 0:h.map(e=>(0,s.jsx)(g.Z,{className:"group",children:(0,s.jsx)(g.Z,{className:"aspect-h-1 aspect-w-1 w-full h-full overflow-hidden rounded-lg bg-gray-700 xl:aspect-h-8 xl:aspect-w-7",children:(0,s.jsx)(c.kL,{data:e,onHandleClick:F,onHandleDeleteClick:L,isDeleted:!0})})},e.id))}),0==h.length&&(0,s.jsx)(g.Z,{className:"w-full min-h-14 flex justify-center items-center text-center",children:(0,s.jsxs)(m.Z,{className:"text-gray-400 text-xl md:text-4xl ml-0 mr-2 mt-3 mb-3 font-bold",variant:"h2",children:[" ",i.o.NO_UPCOMMING_BOOKINGS," "]})})]}),y&&(0,s.jsxs)(g.Z,{className:"mx-auto max-w-2xl px-4 py-6 sm:px-6 sm:py-10 lg:max-w-7xl lg:px-8",children:[(0,s.jsx)(m.Z,{className:"text-white text-2xl md:text-4xl ml-0 mr-2 mt-3 mb-3 font-bold",variant:"h2",children:" Todays bookings: "}),(0,s.jsx)(g.Z,{className:"border-gray-200 w-full border-2 mt-2 mb-8"}),(0,s.jsx)(g.Z,{className:"grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:gap-x-8",children:null==y?void 0:y.map(e=>(0,s.jsx)(g.Z,{className:"group",children:(0,s.jsx)(g.Z,{className:"aspect-h-1 aspect-w-1 w-full h-full overflow-hidden rounded-lg bg-gray-700 xl:aspect-h-8 xl:aspect-w-7",children:(0,s.jsx)(c.kL,{data:e,onHandleClick:F,onHandleDeleteClick:L,isDeleted:!0})})},e.id))}),0==y.length&&(0,s.jsx)(g.Z,{className:"w-full min-h-14 flex justify-center items-center",children:(0,s.jsxs)(m.Z,{className:"text-gray-400 text-xl md:text-4xl ml-0 mr-2 mt-3 mb-3 font-bold",variant:"h2",children:[" ",i.o.NO_TODAYS_BOOKINGS," "]})})]}),O&&(0,s.jsxs)(g.Z,{className:"mx-auto max-w-2xl px-4 py-6 sm:px-6 sm:py-10 lg:max-w-7xl lg:px-8",children:[(0,s.jsx)(m.Z,{className:"text-white text-2xl md:text-4xl ml-0 mr-2 mt-3 mb-3 font-bold",variant:"h2",children:" Past bookings: "}),(0,s.jsx)(g.Z,{className:"border-gray-200 w-full border-2 mt-2 mb-8"}),(0,s.jsx)(g.Z,{className:"grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:gap-x-8",children:null==O?void 0:O.map(e=>(0,s.jsx)(g.Z,{className:"group",children:(0,s.jsx)(g.Z,{className:"aspect-h-1 aspect-w-1 w-full h-full overflow-hidden rounded-lg bg-gray-700 xl:aspect-h-8 xl:aspect-w-7 pointer-events-none opacity-40",children:(0,s.jsx)(c.kL,{data:e,onHandleClick:F,onHandleDeleteClick:L,isDeleted:!1})})},e.id))}),0==O.length&&(0,s.jsx)(g.Z,{className:"w-full min-h-14 flex justify-center items-center",children:(0,s.jsxs)(m.Z,{className:"text-gray-400 text-xl md:text-4xl ml-0 mr-2 mt-3 mb-3 font-bold",variant:"h2",children:[" ",i.o.NO_PAST_BOOKINGS," "]})})]})]}),1==k&&(0,s.jsxs)(s.Fragment,{children:[(null==l?void 0:l.length)>0&&(0,s.jsxs)(g.Z,{className:"mx-auto max-w-2xl px-4 py-6 sm:px-6 sm:py-10 lg:max-w-7xl lg:px-8",children:[(0,s.jsx)(m.Z,{className:"text-white text-2xl md:text-4xl ml-0 mr-2 mt-3 mb-3 font-bold",variant:"h2",children:" Favorite slots: "}),(0,s.jsx)(g.Z,{className:"border-gray-200 w-full border-2 mt-2 mb-8"}),(0,s.jsx)(g.Z,{className:"grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:gap-x-8",children:null==l?void 0:l.map(e=>(0,s.jsx)(g.Z,{className:"group",children:(0,s.jsx)(g.Z,{className:"aspect-h-1 aspect-w-1 w-full h-full overflow-hidden rounded-lg bg-gray-700 xl:aspect-h-8 xl:aspect-w-7",children:(0,s.jsx)(c.lc,{slot:e,onHandleClick:G,isDeleted:!1})})},e.id))})]}),(null==l?void 0:l.length)==0&&(0,s.jsx)(g.Z,{className:"w-full min-h-96 flex justify-center items-center",children:(0,s.jsxs)(m.Z,{className:"text-gray-400 text-xl md:text-4xl ml-0 mr-2 mt-3 mb-3 font-bold",variant:"h2",children:[" ",i.o.NO_FAVORITE_SLOTS," "]})})]})]})]})}},9008:function(e,t,l){e.exports=l(7219)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=9821)}),_N_E=e.O()}]);